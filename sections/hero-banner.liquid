

<div class="section-hero-banner" aria-label="hero carousel">

  <div class="carousel" data-carousel >

    {% comment %} <button class="carousel-btn prev" data-carousel-btn="prev" >&#8656;</button> {% endcomment %}
    <button class="carousel-btn next" data-carousel-btn="next" >{% render 'icon-arrow-right' %}</button>

    <ul data-slides>

      {% for block in section.blocks %}
        <li class="slide"  {% if forloop.index == 1 %} data-active {% endif %}>
         
            <img
              class="image-product"
              src="{{ block.settings.product| image_url }}"
              loading="eager"
              width="100"
              height="100"
            >
          

        <div class="image-overlay"></div> 

            <img
              class="banner-mg image-backdrop "
              src="{{ block.settings.image2 | image_url }}"
              loading="eager"
              width="100"
              height="100"
            >

            <div class="hero-info-container">
          
            <div class="hero-title">
              <h2 class="hero-heading hero-heading-img-one">{{ block.settings.product.title | upcase }}</h2>
            </div>
  
            <div class="hero-heading-btn-container">
  
              <div class="hero-price-cont">
                <span style="color: white;">{% render 'icon-cash' %}</span>
                <span class="hero-price">{{ block.settings.product.price | money }}</span>
              </div>
  
              <div class="hero-heading-btn-container-one">
                <button id="myButton" class="btn-shop-now ">SHOP NOW</button>
              </div>
  
            </div>
  
          </div>
  
        
        </li>
      {% endfor %}
    </ul>
  </div>
</div>


{% comment %} CAROUSEL {% endcomment %}
<script>

  const buttons = document.querySelectorAll("[data-carousel-btn]");
  buttons.forEach(button => {
    button.addEventListener("click", () => {
      console.log("HEERO clicked")
      const offset = button.dataset.carouselBtn === "next" ? 1 : -1;
      const slides = button.closest("[data-carousel]").querySelector("[data-slides]");
      const activeSlide = slides.querySelector("[data-active]");
      let newIndex = [...slides.children].indexOf(activeSlide) + offset;
      if (newIndex < 0) newIndex = slides.children.length -1;
      if (newIndex >= slides.children.length ) newIndex = 0;
      slides.children[newIndex].dataset.active = true;
      delete activeSlide.dataset.active;
    })
  });


</script>

{% schema %}
{
  "name": "Hero banner",
  "settings": [
    {
      "type": "richtext",
      "id": "heading",
      "label": "Add selling point title"
    }
  ],
  "presets": [{ "name": "Default hero banner" }],
  "class": "hero-banner__main-container",
  "tag": "section",
  "limit": 1,
  "blocks": [
    {
      "name": "Hero banner",
      "type": "hero_images",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Select product"
        },
        {
          "type": "text",
          "id": "product_title",
          "label": "Product title"
        },
        {
          "type": "image_picker",
          "id": "image2",
          "label": "Select product image background"
        }
      ]
    }
  ]
}
{% endschema %}
